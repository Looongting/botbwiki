# 使用说明

## 功能概述

本 QQ 机器人提供两个主要功能：
1. 多Wiki站点短链生成功能
2. 随机数生成功能

## 功能详细说明

### 1. 多Wiki站点短链生成功能

#### 触发方式
- **恋与深空WIKI**：发送以 `gd` 开头的消息，格式为：`gd检索词`
- **米斯特利亚WIKI**：发送以 `m` 开头的消息，格式为：`m检索词`

#### 功能说明
- 基于curid的超快速链接生成，无需第三方短链服务
- 智能识别前缀，自动选择对应的Wiki站点
- 使用MediaWiki API获取页面curid，生成直接跳转链接
- 支持缓存机制，相同页面的curid会被缓存

#### 使用示例
```
用户发送：gd思念
机器人回复：短链生成成功：
https://wiki.biligame.com/lysk/index.php?curid=17215

用户发送：m瓦伦
机器人回复：短链生成成功：
https://wiki.biligame.com/mistria/index.php?curid=3767

用户发送：gd搭档
机器人回复：短链生成成功：
https://wiki.biligame.com/lysk/index.php?curid=12835
```

#### 错误处理
- 如果检索词为空，会提示：`请输入有效的检索词，格式：gd检索词`
- 如果页面不存在，会回退到传统短链服务
- 如果所有服务都失败，会返回原始链接

### 2. 随机数生成功能

#### 基础随机数
- **触发方式**：发送 `.rand` 消息
- **功能**：生成 1-100 之间的随机整数
- **示例**：
  ```
  用户发送：.rand
  机器人回复：🎲 随机数：42
  ```

#### 范围随机数（扩展功能）
- **触发方式**：发送 `.randrange <最小值> <最大值>` 消息
- **功能**：生成指定范围内的随机整数
- **限制**：范围差值最大为 10000
- **示例**：
  ```
  用户发送：.randrange 1 50
  机器人回复：🎲 随机数 (1-50)：23
  
  用户发送：.randrange 100 200
  机器人回复：🎲 随机数 (100-200)：156
  ```

#### 错误处理
- 如果参数格式错误，会提示正确的用法
- 如果范围设置错误，会给出相应提示
- 如果出现系统错误，会提示：`随机数生成失败，请稍后重试`

## 注意事项

1. **群聊限制**：机器人仅在群聊中响应命令，不会响应私聊消息
2. **命令格式**：请严格按照指定格式发送命令，注意大小写和符号
3. **网络依赖**：短链生成功能依赖网络连接，网络不稳定时可能失败
4. **频率限制**：建议不要过于频繁地使用短链生成功能，避免触发 API 限制

## 故障排除

### 常见问题

1. **机器人无响应**
   - 检查机器人是否在线
   - 确认命令格式是否正确
   - 查看机器人日志文件

2. **短链生成失败**
   - 检查网络连接
   - 确认短链服务是否正常
   - 稍后重试

3. **随机数功能异常**
   - 检查命令格式
   - 确认参数范围是否合理
   - 重新发送命令

### 日志查看

机器人运行日志保存在 `bot.log` 文件中，可以通过查看日志来诊断问题。

## 更新说明

### v1.0.0
- 实现基础短链生成功能
- 实现随机数生成功能
- 添加错误处理和日志记录
- 支持群聊消息监听
